# Users

### PUT /apiv1/users

Используется для регистрации нового пользователя. Для корректности работы поиска пользователей id пользователя, который был создан позже, будет всегда иметь id больше, чем пользователь, который был зарегистрирован раньше.

##### Коды возврата:
201 - при успешной операции;<br />
403 - если пользователь с таким логином уже существует, либо пароль не удовлетворяет требованиям безопасности.<br />

##### Пример входных данных
    {
        "login":"testlogin",
        "password":"testpassword"
    }
    
### POST /apiv1/users

Используется для авторизации нового пользователя. На вход подается логин и пароль, в случае успешной авторизации возвращается токен, который в дальнейшем используется в заголовке во всех запросах, по которому определяется, авторизирован пользователь или нет. Используется протокол авторизации OAuth 2.0

##### Коды возврата:
200 - при успешной авторизации;<br />
400 - если логин или пароль не совпали, или такого пользователя не существует.<br />

##### Пример входных данных
    {
        "login":"testlogin",
        "password":"testpassword",
        "access_token":"SlAV32hkKG",
        "token_type":"bearer",
        "expires_in":86400,
        "refresh_token":"8xLOxBtZp8"
    }

### GET /apiv1/users?loginprefix={somelogin}&firstid={id}&amount={amount}

Возвращает список пользователей, удовлетворяющих заданным параметрам. В фильтре в параметре loginprefix задается начало логина, если этот параметр не указан, то поиск идет по всем пользователям. Параметр amount определяет, сколько пользователей будет возвращено, а параметр firstid - с какого места начинать формировать список, который будет возвращен. Если параметр firstid не используется, список пользователей будет формироваться с самого начала списка хранящихся пользователей, если параметр amount не указан, используется значение по умолчанию(10). Также возвращает параметры loginprefix и firstid для GET операции, для получения следующей части списка. Если в amount задано большее количество элементов, чем осталось в списке, возвращается столько, сколько осталось, если список закончился, в поле nextfirstid возвращается значение null.

##### Коды возврата:
200 - при успешной операции;<br />
204 - если ничего не найдено;<br />
400 - в случае ошибки (например неверно заданы параметры фильтра).<br />

##### Пример выходных данных:
    {
        "users":[
            {
                "login":"vas",
                "id":1
            },
            {
                "login":"vasya",
                "id":2
            }
        ],
        "nextloginprefix":"va",
        "nextfirstid":3
    }
    
### POST /apiv1/users/{id}

Позволяет изменить данные пользователя, например, пароль или поле "О себе". Можно изменить только свои данные. Если изменение одного из полей не требуется, оно принимает значение null.

##### Коды возврата:
200 - при успешной операции;<br />
401 - если команда пришла от неавторизированного пользователя;<br />
403 - если поле "старый пароль" задано неверно, либо новый пароль не удовлетворяет требованиям безопасности, либо пользователь пытается изменить данные другого пользователя.<br />

##### Пример входных данных
    {
        "oldpassword":"qwerty",
        "newpassword":"1234",
        "aboutyourself":null
    }
